import{j as _,r as $,c,o as d,g as C,h as j,F as y,b as x,k as o,a as t,t as r,T as k,e as V,f as L,l as E,v as S,m as B,q as D,p as m}from"./index-BNr9K14p.js";import{i as U}from"./isLoadingView-NKkRiI6N.js";const F={class:"list-group"},J=["onClick"],M={class:"d-flex w-100 justify-content-between"},O={class:"mb-1"},Q={class:"mb-1 small text-start"},q={__name:"drinksView",setup(H){const u=_("drinks"),v=_("addCart"),l=$([]),e=_("isLoading");return e.value=!0,u.value.forEach((n,h)=>{setTimeout(()=>{l.value.push(n),h+1===u.value.length&&(e.value=!1)},400*h)}),(n,h)=>(d(),c("ul",F,[C(k,{name:"collapse",tag:"li"},{default:j(()=>[(d(!0),c(y,null,x(l.value,b=>(d(),c("li",{key:b.id,class:"list-group-item list-group-item-action",onClick:p=>o(v)(b),style:{cursor:"pointer"}},[t("div",M,[t("h5",O,r(b.name),1),t("small",null,"$"+r(b.price),1)]),t("p",Q,r(b.description),1)],8,J))),128))]),_:1})]))}},G={key:0,class:"container my-4"},R={class:"mb-3 p-3 bg-light rounded"},W={class:"mb-1"},z={class:"mb-0"},A={class:"table table-bordered table-striped table-hover"},I={key:1,class:"alert alert-warning"},K={__name:"ordersView",setup(H){const u=_("order"),v=_("orderCancel");return(l,e)=>(d(),c(y,null,[e[5]||(e[5]=t("hr",null,null,-1)),o(u).cart&&o(u).cart.length>0?(d(),c("div",G,[e[4]||(e[4]=t("h5",{class:"mb-3"},"訂單",-1)),t("button",{onClick:e[0]||(e[0]=(...n)=>o(v)&&o(v)(...n))},"取消訂單"),t("div",R,[t("p",W,[e[1]||(e[1]=t("strong",null,"備註:",-1)),V(" "+r(o(u).description),1)]),t("p",z,[e[2]||(e[2]=t("strong",null,"總計:",-1)),V(" $"+r(o(u).total),1)])]),t("table",A,[e[3]||(e[3]=t("thead",{class:"table-dark"},[t("tr",null,[t("th",null,"品項"),t("th",null,"描述"),t("th",null,"售價"),t("th",null,"數量"),t("th",null,"小記")])],-1)),t("tbody",null,[(d(!0),c(y,null,x(o(u).cart,n=>(d(),c("tr",{key:n.id},[t("td",null,r(n.name),1),t("td",null,r(n.description),1),t("td",null,"$"+r(n.price),1),t("td",null,r(n.count),1),t("td",null,"$"+r(n.price*n.count),1)]))),128))])])])):(d(),c("div",I," 購物車目前是空的 "))],64))}},P={class:"col-9"},X={key:0,class:"table table-bordered table-striped table-hover"},Y=["onChange","onUpdate:modelValue"],Z=["value"],tt=["onClick"],et={key:1,class:"alert alert-warning"},lt={class:"mt-3 d-flex justify-content-between align-items-center"},nt={__name:"shoppingView",setup(H){const u=_("cart"),v=_("description"),l=_("changeCount"),e=_("delHandler"),n=_("orderHandler"),h=_("total");return(b,p)=>(d(),c("div",P,[C(k,{name:"collapse",tag:"div"},{default:j(()=>[o(u)&&o(u).length>0?(d(),c("table",X,[p[2]||(p[2]=t("thead",{class:"table-dark"},[t("tr",null,[t("th",null,"品項"),t("th",null,"描述"),t("th",null,"售價"),t("th",null,"數量"),t("th",null,"小記"),t("th",null,"刪除")])],-1)),t("tbody",null,[(d(!0),c(y,null,x(o(u),s=>(d(),c("tr",{key:s.id},[t("td",null,r(s.name),1),t("td",null,r(s.description),1),t("td",null,"$"+r(s.price),1),t("td",null,[L(t("select",{class:"form-select form-select-sm w-auto",onChange:g=>o(l)(g,s.id),"onUpdate:modelValue":g=>s.count=g},[(d(),c(y,null,x(10,g=>t("option",{key:g,value:g},r(g),9,Z)),64))],40,Y),[[E,s.count]])]),t("td",null,"$"+r(s.price*s.count),1),t("td",null,[t("button",{class:"btn btn-sm btn-danger",onClick:g=>o(e)(s.id)}," 刪除 ",8,tt)])]))),128))])])):(d(),c("div",et," 購物車目前是空的 "))]),_:1}),t("div",lt,[t("div",null,[p[3]||(p[3]=t("strong",null,"總計:",-1)),V(" $"+r(o(h)),1)]),t("div",null,[L(t("input",{type:"text",class:"form-control form-control-sm",placeholder:"備註","onUpdate:modelValue":p[0]||(p[0]=s=>B(v)?v.value=s:null)},null,512),[[S,o(v)]])]),t("button",{class:"btn btn-primary btn-sm",onClick:p[1]||(p[1]=(...s)=>o(n)&&o(n)(...s))}," 結帳 ")])]))}},ot={class:"row"},st={class:"col-3"},it={__name:"Week3",setup(H){const v=$([{id:1,name:"珍珠奶茶",description:"香濃奶茶搭配QQ珍珠",price:50},{id:2,name:"冬瓜檸檬",description:"清新冬瓜配上新鮮檸檬",price:45},{id:3,name:"翡翠檸檬",description:"綠茶與檸檬的完美結合",price:55},{id:4,name:"四季春茶",description:"香醇四季春茶，回甘無比",price:45},{id:5,name:"阿薩姆奶茶",description:"阿薩姆紅茶搭配香醇鮮奶",price:50},{id:6,name:"檸檬冰茶",description:"檸檬與冰茶的清新組合",price:45},{id:7,name:"芒果綠茶",description:"芒果與綠茶的獨特風味",price:55},{id:8,name:"抹茶拿鐵",description:"抹茶與鮮奶的絕配",price:60}]),l=$([]),e=$(""),n=D(()=>{let a=0;return l.value.forEach(i=>{a+=i.price*i.count}),a}),h=$({}),b=$(!1);m("drinks",v),m("cart",l),m("description",e),m("total",n),m("order",h),m("isLoading",b);const p=a=>{let i=!0;for(let f=0;f<l.value.length;f++)if(l.value[f].id===a.id){let w=l.value[f];w.count+=1,console.log(l.value),i=!1}i&&(a.count=1,l.value.push(a))},s=()=>{console.log("orderHandler");let a=JSON.parse(JSON.stringify({cart:l.value,description:e.value,total:n.value}));h.value=a,l.value=[],e.value=""},g=(a,i)=>{console.log("changeCount",a);const f=a.target.value;console.log("目前輸入值:",f),console.log("id",i),l.value.forEach(w=>{w.id===i&&(w.count=a.target.value)}),console.log(l.value)},N=a=>{console.log("delHandler:",a),l.value=l.value.filter(i=>{if(i.id!==a)return console.log("c id:",i),i})},T=()=>{h.value={}};return m("addCart",p),m("orderHandler",s),m("changeCount",g),m("delHandler",N),m("orderCancel",T),(a,i)=>(d(),c(y,null,[i[0]||(i[0]=t("h3",null,"餐點購買",-1)),t("div",ot,[t("div",st,[C(q)]),C(nt)]),C(K),C(U)],64))}};export{it as default};
