import{i as h,c as i,o as d,F as f,b as y,h as n,a as t,t as a,e as H,f as j,j as k,v as S,k as B,r as C,l as E,m as x,p as v}from"./index-BNP0jlvV.js";const U={class:"list-group"},D=["onClick"],F={class:"d-flex w-100 justify-content-between"},J={class:"mb-1"},M={class:"mb-1"},O={__name:"drinksView",setup(w){const u=h("drinks"),p=h("addCart");return(o,l)=>(d(),i("ul",U,[(d(!0),i(f,null,y(n(u),e=>(d(),i("li",{key:e.id,class:"list-group-item list-group-item-action",onClick:g=>n(p)(e),style:{cursor:"pointer"}},[t("div",F,[t("h5",J,a(e.name),1),t("small",null,"$"+a(e.price),1)]),t("p",M,a(e.description),1)],8,D))),128))]))}},Q={key:0,class:"container my-4"},T={class:"mb-3 p-3 bg-light rounded"},L={class:"mb-1"},R={class:"mb-0"},W={class:"table table-bordered table-striped table-hover"},q={key:1,class:"alert alert-warning"},z={__name:"ordersView",setup(w){const u=h("order"),p=h("orderCancel");return(o,l)=>(d(),i(f,null,[l[5]||(l[5]=t("hr",null,null,-1)),n(u).cart&&n(u).cart.length>0?(d(),i("div",Q,[l[4]||(l[4]=t("h5",{class:"mb-3"},"訂單",-1)),t("button",{onClick:l[0]||(l[0]=(...e)=>n(p)&&n(p)(...e))},"取消訂單"),t("div",T,[t("p",L,[l[1]||(l[1]=t("strong",null,"備註:",-1)),H(" "+a(n(u).description),1)]),t("p",R,[l[2]||(l[2]=t("strong",null,"總計:",-1)),H(" $"+a(n(u).total),1)])]),t("table",W,[l[3]||(l[3]=t("thead",{class:"table-dark"},[t("tr",null,[t("th",null,"品項"),t("th",null,"描述"),t("th",null,"售價"),t("th",null,"數量"),t("th",null,"小記")])],-1)),t("tbody",null,[(d(!0),i(f,null,y(n(u).cart,e=>(d(),i("tr",{key:e.id},[t("td",null,a(e.name),1),t("td",null,a(e.description),1),t("td",null,"$"+a(e.price),1),t("td",null,a(e.count),1),t("td",null,"$"+a(e.price*e.count),1)]))),128))])])])):(d(),i("div",q," 購物車目前是空的 "))],64))}},A={class:"col-9"},G={key:0,class:"table table-bordered table-striped table-hover"},I=["onChange","onUpdate:modelValue"],K=["value"],P=["onClick"],X={key:1,class:"alert alert-warning"},Y={class:"mt-3 d-flex justify-content-between align-items-center"},Z={__name:"shoppingView",setup(w){const u=h("cart"),p=h("description"),o=h("changeCount"),l=h("delHandler"),e=h("orderHandler"),g=h("total");return(V,m)=>(d(),i("div",A,[n(u)&&n(u).length>0?(d(),i("table",G,[m[2]||(m[2]=t("thead",{class:"table-dark"},[t("tr",null,[t("th",null,"品項"),t("th",null,"描述"),t("th",null,"售價"),t("th",null,"數量"),t("th",null,"小記"),t("th",null,"刪除")])],-1)),t("tbody",null,[(d(!0),i(f,null,y(n(u),s=>(d(),i("tr",{key:s.id},[t("td",null,a(s.name),1),t("td",null,a(s.description),1),t("td",null,"$"+a(s.price),1),t("td",null,[j(t("select",{class:"form-select form-select-sm w-auto",onChange:_=>n(o)(_,s.id),"onUpdate:modelValue":_=>s.count=_},[(d(),i(f,null,y(10,_=>t("option",{key:_,value:_},a(_),9,K)),64))],40,I),[[k,s.count]])]),t("td",null,"$"+a(s.price*s.count),1),t("td",null,[t("button",{class:"btn btn-sm btn-danger",onClick:_=>n(l)(s.id)}," 刪除 ",8,P)])]))),128))])])):(d(),i("div",X," 購物車目前是空的 ")),t("div",Y,[t("div",null,[m[3]||(m[3]=t("strong",null,"總計:",-1)),H(" $"+a(n(g)),1)]),t("div",null,[j(t("input",{type:"text",class:"form-control form-control-sm",placeholder:"備註","onUpdate:modelValue":m[0]||(m[0]=s=>B(p)?p.value=s:null)},null,512),[[S,n(p)]])]),t("button",{class:"btn btn-primary btn-sm",onClick:m[1]||(m[1]=(...s)=>n(e)&&n(e)(...s))}," 結帳 ")])]))}},tt={class:"row"},et={class:"col-3"},nt={__name:"Week3",setup(w){const p=C([{id:1,name:"珍珠奶茶",description:"香濃奶茶搭配QQ珍珠",price:50},{id:2,name:"冬瓜檸檬",description:"清新冬瓜配上新鮮檸檬",price:45},{id:3,name:"翡翠檸檬",description:"綠茶與檸檬的完美結合",price:55},{id:4,name:"四季春茶",description:"香醇四季春茶，回甘無比",price:45},{id:5,name:"阿薩姆奶茶",description:"阿薩姆紅茶搭配香醇鮮奶",price:50},{id:6,name:"檸檬冰茶",description:"檸檬與冰茶的清新組合",price:45},{id:7,name:"芒果綠茶",description:"芒果與綠茶的獨特風味",price:55},{id:8,name:"抹茶拿鐵",description:"抹茶與鮮奶的絕配",price:60}]),o=C([]),l=C(""),e=E(()=>{let r=0;return o.value.forEach(c=>{r+=c.price*c.count}),r}),g=C({});v("drinks",p),v("cart",o),v("description",l),v("total",e),v("order",g);const V=r=>{let c=!0;for(let b=0;b<o.value.length;b++)if(o.value[b].id===r.id){let $=o.value[b];$.count+=1,console.log(o.value),c=!1}c&&(r.count=1,o.value.push(r))},m=()=>{console.log("orderHandler");let r=JSON.parse(JSON.stringify({cart:o.value,description:l.value,total:e.value}));g.value=r,o.value=[],l.value=""},s=(r,c)=>{console.log("changeCount",r);const b=r.target.value;console.log("目前輸入值:",b),console.log("id",c),o.value.forEach($=>{$.id===c&&($.count=r.target.value)}),console.log(o.value)},_=r=>{console.log("delHandler:",r),o.value=o.value.filter(c=>{if(c.id!==r)return console.log("c id:",c),c})},N=()=>{g.value={}};return v("addCart",V),v("orderHandler",m),v("changeCount",s),v("delHandler",_),v("orderCancel",N),(r,c)=>(d(),i(f,null,[c[0]||(c[0]=t("h3",null,"餐點購買",-1)),t("div",tt,[t("div",et,[x(O)]),x(Z)]),x(z)],64))}};export{nt as default};
